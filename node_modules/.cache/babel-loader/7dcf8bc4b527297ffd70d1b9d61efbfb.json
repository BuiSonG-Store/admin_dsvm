{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/SonBui/OneDrive/M\\xE1y t\\xEDnh/dacsanvungmien_frontent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/SonBui/OneDrive/M\\xE1y t\\xEDnh/dacsanvungmien_frontent/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\SonBui\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\dacsanvungmien_frontent\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useFormik,Form,FormikProvider}from'formik';// material\nimport{Button,Stack}from'@mui/material';import{LoadingButton}from'@mui/lab';import{useState}from'react';import{unwrapResult}from'@reduxjs/toolkit';import{useDispatch}from'react-redux';import{editProductImage,postProductImage}from'../../store/slice/productImage';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CreateFormImage(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var dispatch=useDispatch();var formik=useFormik({initialValues:{Image:''},onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData,i,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();console.log('run');if(props.productEdit){formData.append('ProductId',props.productEdit);}else{formData.append('ProductId',props.id);}console.log(formData.get('ProductId'));for(i=0;i<values.length;i++){formData.append('Image',values[i]);}_context.prev=5;if(!props.productEdit){_context.next=12;break;}_context.next=9;return dispatch(editProductImage(formData));case 9:_context.t0=_context.sent;_context.next=15;break;case 12:_context.next=14;return dispatch(postProductImage(formData));case 14:_context.t0=_context.sent;case 15:res=_context.t0;unwrapResult(res);props.submitImage({res:res.payload});_context.next=23;break;case 20:_context.prev=20;_context.t1=_context[\"catch\"](5);console.log(_context.t1);case 23:case\"end\":return _context.stop();}}},_callee,null,[[5,20]]);}));function onSubmit(){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var handleFileChange=function handleFileChange(e){setValues(e.target.files);};var isSubmitting=formik.isSubmitting,handleSubmit=formik.handleSubmit;return/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsxs(Form,{autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit,encType:'multipart/form-data',children:[/*#__PURE__*/_jsx(Stack,{spacing:1,children:/*#__PURE__*/_jsxs(Button,{variant:\"contained\",component:\"label\",children:[\"Upload File\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"/image/*\",multiple:true,onChange:handleFileChange})]})}),/*#__PURE__*/_jsx(LoadingButton,{fullWidth:true,size:\"large\",type:\"submit\",variant:\"contained\",loading:isSubmitting,children:\"Submit\"})]})});}","map":{"version":3,"sources":["C:/Users/SonBui/OneDrive/Máy tính/dacsanvungmien_frontent/src/components/products/CreateFormImage.js"],"names":["useFormik","Form","FormikProvider","Button","Stack","LoadingButton","useState","unwrapResult","useDispatch","editProductImage","postProductImage","CreateFormImage","props","values","setValues","dispatch","formik","initialValues","Image","onSubmit","formData","FormData","console","log","productEdit","append","id","get","i","length","res","submitImage","payload","handleFileChange","e","target","files","isSubmitting","handleSubmit"],"mappings":"4cAAA,OAAQA,SAAR,CAAmBC,IAAnB,CAAyBC,cAAzB,KAA8C,QAA9C,CACA;AACA,OACIC,MADJ,CAEIC,KAFJ,KAGO,eAHP,CAIA,OAAQC,aAAR,KAA4B,UAA5B,CACA,OAASC,QAAT,KAAwB,OAAxB,CACA,OAAQC,YAAR,KAA2B,kBAA3B,CACA,OAAQC,WAAR,KAA0B,aAA1B,CACA,OAAQC,gBAAR,CAA0BC,gBAA1B,KAAiD,gCAAjD,CACA;wFAEA,cAAe,SAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CAC3C,cAA4BN,QAAQ,CAAC,IAAD,CAApC,wCAAOO,MAAP,eAAeC,SAAf,eACA,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,CAAAA,MAAM,CAAGhB,SAAS,CAAC,CACrBiB,aAAa,CAAE,CACXC,KAAK,CAAE,EADI,CADM,CAIrBC,QAAQ,kFAAE,sJACAC,QADA,CACW,GAAIC,CAAAA,QAAJ,EADX,CAENC,OAAO,CAACC,GAAR,CAAY,KAAZ,EACA,GAAIX,KAAK,CAACY,WAAV,CAAsB,CAClBJ,QAAQ,CAACK,MAAT,CAAgB,WAAhB,CAA4Bb,KAAK,CAACY,WAAlC,EACH,CAFD,IAEM,CACFJ,QAAQ,CAACK,MAAT,CAAgB,WAAhB,CAA4Bb,KAAK,CAACc,EAAlC,EACH,CACDJ,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACO,GAAT,CAAa,WAAb,CAAZ,EACA,IAASC,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAGf,MAAM,CAACgB,MAA3B,CAAmCD,CAAC,EAApC,CAAwC,CACpCR,QAAQ,CAACK,MAAT,CAAgB,OAAhB,CAAyBZ,MAAM,CAACe,CAAD,CAA/B,EACH,CAXK,oBAaUhB,KAAK,CAACY,WAbhB,gDAakCT,CAAAA,QAAQ,CAACN,gBAAgB,CAACW,QAAD,CAAjB,CAb1C,wFAa8EL,CAAAA,QAAQ,CAACL,gBAAgB,CAACU,QAAD,CAAjB,CAbtF,2CAaIU,GAbJ,aAcFvB,YAAY,CAACuB,GAAD,CAAZ,CACAlB,KAAK,CAACmB,WAAN,CAAkB,CAACD,GAAG,CAACA,GAAG,CAACE,OAAT,CAAlB,EAfE,iFAiBFV,OAAO,CAACC,GAAR,cAjBE,qEAAF,kFAJa,CAAD,CAAxB,CA0BA,GAAMU,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,CAAD,CAAO,CAC5BpB,SAAS,CAACoB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT,CACH,CAFD,CAIA,GAAOC,CAAAA,YAAP,CAAqCrB,MAArC,CAAOqB,YAAP,CAAqBC,YAArB,CAAqCtB,MAArC,CAAqBsB,YAArB,CAEA,mBACI,KAAC,cAAD,EAAgB,KAAK,CAAEtB,MAAvB,uBACI,MAAC,IAAD,EAAM,YAAY,CAAC,KAAnB,CAAyB,UAAU,KAAnC,CAAoC,QAAQ,CAAEsB,YAA9C,CAA4D,OAAO,CAAE,qBAArE,wBACI,KAAC,KAAD,EAAO,OAAO,CAAE,CAAhB,uBACI,MAAC,MAAD,EACI,OAAO,CAAC,WADZ,CAEI,SAAS,CAAC,OAFd,sCAKI,cACI,IAAI,CAAC,MADT,CAEI,MAAM,CAAC,UAFX,CAGI,QAAQ,KAHZ,CAII,QAAQ,CAAEL,gBAJd,EALJ,GADJ,EADJ,cAgBI,KAAC,aAAD,EACI,SAAS,KADb,CAEI,IAAI,CAAC,OAFT,CAGI,IAAI,CAAC,QAHT,CAII,OAAO,CAAC,WAJZ,CAKI,OAAO,CAAEI,YALb,oBAhBJ,GADJ,EADJ,CA8BH","sourcesContent":["import {useFormik, Form, FormikProvider} from 'formik';\r\n// material\r\nimport {\r\n    Button,\r\n    Stack,\r\n} from '@mui/material';\r\nimport {LoadingButton} from '@mui/lab';\r\nimport { useState} from 'react';\r\nimport {unwrapResult} from '@reduxjs/toolkit';\r\nimport {useDispatch} from 'react-redux';\r\nimport {editProductImage, postProductImage} from '../../store/slice/productImage';\r\n// ----------------------------------------------------------------------\r\n\r\nexport default function CreateFormImage(props) {\r\n    const [values, setValues] = useState(null);\r\n    const dispatch = useDispatch();\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            Image: ''\r\n        },\r\n        onSubmit: async () => {\r\n            const formData = new FormData();\r\n            console.log('run');\r\n            if (props.productEdit){\r\n                formData.append('ProductId',props.productEdit );\r\n            }else {\r\n                formData.append('ProductId',props.id );\r\n            }\r\n            console.log(formData.get('ProductId'));\r\n            for (let i = 0; i < values.length; i++) {\r\n                formData.append('Image', values[i]);\r\n            }\r\n            try {\r\n                const res = props.productEdit?await dispatch(editProductImage(formData)) :await dispatch(postProductImage(formData));\r\n                unwrapResult(res);\r\n                props.submitImage({res:res.payload});\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n    });\r\n\r\n    const handleFileChange = (e) => {\r\n        setValues(e.target.files);\r\n    };\r\n\r\n    const {isSubmitting, handleSubmit} = formik;\r\n\r\n    return (\r\n        <FormikProvider value={formik}>\r\n            <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit} encType={'multipart/form-data'}>\r\n                <Stack spacing={1}>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        component=\"label\"\r\n                    >\r\n                        Upload File\r\n                        <input\r\n                            type=\"file\"\r\n                            accept=\"/image/*\"\r\n                            multiple\r\n                            onChange={handleFileChange}\r\n                        />\r\n                    </Button>\r\n                </Stack>\r\n\r\n                <LoadingButton\r\n                    fullWidth\r\n                    size=\"large\"\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    loading={isSubmitting}\r\n                >\r\n                    Submit\r\n                </LoadingButton>\r\n            </Form>\r\n        </FormikProvider>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}