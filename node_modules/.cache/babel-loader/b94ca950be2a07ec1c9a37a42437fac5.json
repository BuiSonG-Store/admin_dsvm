{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/SonBui/OneDrive/M\\xE1y t\\xEDnh/dacsanvungmien_frontent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/SonBui/OneDrive/M\\xE1y t\\xEDnh/dacsanvungmien_frontent/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\SonBui\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\dacsanvungmien_frontent\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{filter}from'lodash';import{Icon}from'@iconify/react';import{useEffect,useState}from'react';import plusFill from'@iconify/icons-eva/plus-fill';import{Link as RouterLink}from'react-router-dom';// material\nimport{Card,Table,Stack,Button,Checkbox,TableRow,TableBody,TableCell,Container,Typography,TableContainer,TablePagination}from'@mui/material';// components\nimport Page from'../components/Page';import Scrollbar from'../components/Scrollbar';import SearchNotFound from'../components/SearchNotFound';import{UserListHead,UserMoreMenu}from'../components/_dashboard/user';import CategoryListToolbar from'../components/_dashboard/category/CategoryListToolbar';//\nimport{unwrapResult}from'@reduxjs/toolkit';import{useDispatch}from'react-redux';import{getCategory}from'../store/slice/category';import CreateForm from'../components/category/CreateForm';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TABLE_HEAD=[{id:'name',label:'Name',alignRight:false},{id:''}];// ----------------------------------------------------------------------\nfunction descendingComparator(a,b,orderBy){if(b[orderBy]<a[orderBy]){return-1;}if(b[orderBy]>a[orderBy]){return 1;}return 0;}function getComparator(order,orderBy){return order==='desc'?function(a,b){return descendingComparator(a,b,orderBy);}:function(a,b){return-descendingComparator(a,b,orderBy);};}function applySortFilter(array,comparator,query){var stabilizedThis=array.map(function(el,index){return[el,index];});stabilizedThis.sort(function(a,b){var order=comparator(a[0],b[0]);if(order!==0){return order;}return a[1]-b[1];});if(query){return filter(array,function(_user){return _user.name.toLowerCase().indexOf(query.toLowerCase())!==-1;});}return stabilizedThis.map(function(el){return el[0];});}export default function Category(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var dispatch=useDispatch();var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState('asc'),_useState6=_slicedToArray(_useState5,2),order=_useState6[0],setOrder=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selected=_useState8[0],setSelected=_useState8[1];var _useState9=useState('name'),_useState10=_slicedToArray(_useState9,2),orderBy=_useState10[0],setOrderBy=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),filterName=_useState12[0],setFilterName=_useState12[1];var _useState13=useState(5),_useState14=_slicedToArray(_useState13,2),rowsPerPage=_useState14[0],setRowsPerPage=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),openForm=_useState16[0],setOpenForm=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),dataEdit=_useState18[0],setDataEdit=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),isEdit=_useState20[0],setIsEdit=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),isDelete=_useState22[0],setIsDelete=_useState22[1];useEffect(function(){fetchData();},[isEdit,isDelete]);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return dispatch(getCategory());case 3:res=_context.sent;setData(res.payload);unwrapResult(res);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();var handleRequestSort=function handleRequestSort(event,property){var isAsc=orderBy===property&&order==='asc';setOrder(isAsc?'desc':'asc');setOrderBy(property);};var handleSubmit=function handleSubmit(value){setOpenForm(false);setDataEdit({});value&&setIsEdit(value);};var handleSelectAllClick=function handleSelectAllClick(event){if(event.target.checked){var newSelecteds=data.map(function(n){return n.name;});setSelected(newSelecteds);return;}setSelected([]);};var handleClick=function handleClick(event,id){var selectedIndex=selected.indexOf(id);var newSelected=[];if(selectedIndex===-1){newSelected=newSelected.concat(selected,id);}else if(selectedIndex===0){newSelected=newSelected.concat(selected.slice(1));}else if(selectedIndex===selected.length-1){newSelected=newSelected.concat(selected.slice(0,-1));}else if(selectedIndex>0){newSelected=newSelected.concat(selected.slice(0,selectedIndex),selected.slice(selectedIndex+1));}setSelected(newSelected);};var handleChangePage=function handleChangePage(event,newPage){setPage(newPage);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setRowsPerPage(parseInt(event.target.value,10));setPage(0);};var handleFilterByName=function handleFilterByName(event){setFilterName(event.target.value);};var clickButtonEdit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return dispatch(getCategory(id));case 3:res=_context2.sent;setDataEdit(res.payload[0]);setOpenForm(true);unwrapResult(res);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function clickButtonEdit(_x){return _ref2.apply(this,arguments);};}();var handleDelete=function handleDelete(value){setSelected([]);value&&setIsDelete(value);};var emptyRows=page>0?Math.max(0,(1+page)*rowsPerPage-data.length):0;var filteredUsers=applySortFilter(data,getComparator(order,orderBy),filterName);var isUserNotFound=filteredUsers.length===0;return/*#__PURE__*/_jsx(Page,{title:\"User | Minimal-UI\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",justifyContent:\"space-between\",mb:5,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Category\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:RouterLink,to:\"#\",startIcon:/*#__PURE__*/_jsx(Icon,{icon:plusFill}),onClick:function onClick(){return setOpenForm(!openForm);},children:\"New Category\"})]}),openForm&&/*#__PURE__*/_jsx(CreateForm,{dataEdit:dataEdit,handleSubmit:handleSubmit}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CategoryListToolbar,{numSelected:selected.length,selected:selected,handleDelete:handleDelete,filterName:filterName,onFilterName:handleFilterByName}),/*#__PURE__*/_jsx(Scrollbar,{children:/*#__PURE__*/_jsx(TableContainer,{sx:{minWidth:800},children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(UserListHead,{order:order,orderBy:orderBy,headLabel:TABLE_HEAD,rowCount:data.length,numSelected:selected.length,onRequestSort:handleRequestSort,onSelectAllClick:handleSelectAllClick}),/*#__PURE__*/_jsxs(TableBody,{children:[filteredUsers.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(row){var id=row.id,name=row.name;var isItemSelected=selected.indexOf(id)!==-1;return/*#__PURE__*/_jsxs(TableRow,{hover:true,tabIndex:-1,role:\"checkbox\",selected:isItemSelected,\"aria-checked\":isItemSelected,children:[/*#__PURE__*/_jsx(TableCell,{padding:\"checkbox\",children:/*#__PURE__*/_jsx(Checkbox,{checked:isItemSelected,onChange:function onChange(event){return handleClick(event,id);}})}),/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",padding:\"none\",children:/*#__PURE__*/_jsx(Stack,{direction:\"row\",alignItems:\"center\",spacing:2,children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",noWrap:true,children:name})})}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(UserMoreMenu,{userId:id,clickButtonEdit:clickButtonEdit})})]},id);}),emptyRows>0&&/*#__PURE__*/_jsx(TableRow,{style:{height:53*emptyRows},children:/*#__PURE__*/_jsx(TableCell,{colSpan:6})})]}),isUserNotFound&&/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{align:\"center\",colSpan:6,sx:{py:3},children:/*#__PURE__*/_jsx(SearchNotFound,{searchQuery:filterName})})})})]})})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[5,10,25],component:\"div\",count:data.length,rowsPerPage:rowsPerPage,page:page,onPageChange:handleChangePage,onRowsPerPageChange:handleChangeRowsPerPage})]})]})});}","map":{"version":3,"sources":["C:/Users/SonBui/OneDrive/Máy tính/dacsanvungmien_frontent/src/pages/Category.js"],"names":["filter","Icon","useEffect","useState","plusFill","Link","RouterLink","Card","Table","Stack","Button","Checkbox","TableRow","TableBody","TableCell","Container","Typography","TableContainer","TablePagination","Page","Scrollbar","SearchNotFound","UserListHead","UserMoreMenu","CategoryListToolbar","unwrapResult","useDispatch","getCategory","CreateForm","TABLE_HEAD","id","label","alignRight","descendingComparator","a","b","orderBy","getComparator","order","applySortFilter","array","comparator","query","stabilizedThis","map","el","index","sort","_user","name","toLowerCase","indexOf","Category","data","setData","dispatch","page","setPage","setOrder","selected","setSelected","setOrderBy","filterName","setFilterName","rowsPerPage","setRowsPerPage","openForm","setOpenForm","dataEdit","setDataEdit","isEdit","setIsEdit","isDelete","setIsDelete","fetchData","res","payload","console","log","handleRequestSort","event","property","isAsc","handleSubmit","value","handleSelectAllClick","target","checked","newSelecteds","n","handleClick","selectedIndex","newSelected","concat","slice","length","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","handleFilterByName","clickButtonEdit","handleDelete","emptyRows","Math","max","filteredUsers","isUserNotFound","minWidth","row","isItemSelected","height","py"],"mappings":"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","sourcesContent":["import {filter} from 'lodash';\r\nimport {Icon} from '@iconify/react';\r\nimport {useEffect, useState} from 'react';\r\nimport plusFill from '@iconify/icons-eva/plus-fill';\r\nimport {Link as RouterLink} from 'react-router-dom';\r\n// material\r\nimport {\r\n    Card,\r\n    Table,\r\n    Stack,\r\n    Button,\r\n    Checkbox,\r\n    TableRow,\r\n    TableBody,\r\n    TableCell,\r\n    Container,\r\n    Typography,\r\n    TableContainer,\r\n    TablePagination\r\n} from '@mui/material';\r\n// components\r\nimport Page from '../components/Page';\r\nimport Scrollbar from '../components/Scrollbar';\r\nimport SearchNotFound from '../components/SearchNotFound';\r\nimport {UserListHead, UserMoreMenu} from '../components/_dashboard/user';\r\nimport CategoryListToolbar from '../components/_dashboard/category/CategoryListToolbar';\r\n//\r\nimport {unwrapResult} from '@reduxjs/toolkit';\r\nimport {useDispatch} from 'react-redux';\r\nimport { getCategory} from '../store/slice/category';\r\nimport CreateForm from '../components/category/CreateForm';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst TABLE_HEAD = [\r\n    {id: 'name', label: 'Name', alignRight: false},\r\n    {id: ''}\r\n];\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n    if (b[orderBy] < a[orderBy]) {\r\n        return -1;\r\n    }\r\n    if (b[orderBy] > a[orderBy]) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n    return order === 'desc'\r\n        ? (a, b) => descendingComparator(a, b, orderBy)\r\n        : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction applySortFilter(array, comparator, query) {\r\n    const stabilizedThis = array.map((el, index) => [el, index]);\r\n    stabilizedThis.sort((a, b) => {\r\n        const order = comparator(a[0], b[0]);\r\n        if (order !== 0) {\r\n            return order;\r\n        }\r\n        return a[1] - b[1];\r\n    });\r\n    if (query) {\r\n        return filter(array, (_user) => _user.name.toLowerCase().indexOf(query.toLowerCase()) !== -1);\r\n    }\r\n    return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nexport default function Category() {\r\n    const [data,setData]=useState([]);\r\n    const dispatch=useDispatch();\r\n    const [page, setPage] = useState(0);\r\n    const [order, setOrder] = useState('asc');\r\n    const [selected, setSelected] = useState([]);\r\n    const [orderBy, setOrderBy] = useState('name');\r\n    const [filterName, setFilterName] = useState('');\r\n    const [rowsPerPage, setRowsPerPage] = useState(5);\r\n    const [openForm,setOpenForm]=useState(false);\r\n    const [dataEdit,setDataEdit]=useState();\r\n    const [isEdit,setIsEdit]=useState([]);\r\n    const [isDelete,setIsDelete]=useState([]);\r\n\r\n    useEffect(()=>{\r\n        fetchData();\r\n    },[isEdit,isDelete]);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const res = await dispatch(getCategory());\r\n            setData(res.payload);\r\n            unwrapResult(res);\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    const handleRequestSort = (event, property) => {\r\n        const isAsc = orderBy === property && order === 'asc';\r\n        setOrder(isAsc ? 'desc' : 'asc');\r\n        setOrderBy(property);\r\n    };\r\n\r\n    const handleSubmit=(value)=>{\r\n        setOpenForm(false);\r\n        setDataEdit({});\r\n        value && setIsEdit(value);\r\n    };\r\n\r\n\r\n    const handleSelectAllClick = (event) => {\r\n        if (event.target.checked) {\r\n            const newSelecteds = data.map((n) => n.name);\r\n            setSelected(newSelecteds);\r\n            return;\r\n        }\r\n        setSelected([]);\r\n    };\r\n\r\n    const handleClick = (event, id) => {\r\n        const selectedIndex = selected.indexOf(id);\r\n        let newSelected = [];\r\n        if (selectedIndex === -1) {\r\n            newSelected = newSelected.concat(selected, id);\r\n        } else if (selectedIndex === 0) {\r\n            newSelected = newSelected.concat(selected.slice(1));\r\n        } else if (selectedIndex === selected.length - 1) {\r\n            newSelected = newSelected.concat(selected.slice(0, -1));\r\n        } else if (selectedIndex > 0) {\r\n            newSelected = newSelected.concat(\r\n                selected.slice(0, selectedIndex),\r\n                selected.slice(selectedIndex + 1)\r\n            );\r\n        }\r\n        setSelected(newSelected);\r\n    };\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n        setPage(newPage);\r\n    };\r\n\r\n    const handleChangeRowsPerPage = (event) => {\r\n        setRowsPerPage(parseInt(event.target.value, 10));\r\n        setPage(0);\r\n    };\r\n\r\n    const handleFilterByName = (event) => {\r\n        setFilterName(event.target.value);\r\n    };\r\n\r\n    const clickButtonEdit=async(id)=>{\r\n        try {\r\n            const res = await dispatch(getCategory(id));\r\n            setDataEdit(res.payload[0]);\r\n            setOpenForm(true);\r\n            unwrapResult(res);\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    const handleDelete=(value)=>{\r\n        setSelected([]);\r\n        value&&setIsDelete(value);\r\n    };\r\n    const emptyRows = page > 0 ? Math.max(0, (1 + page) * rowsPerPage - data.length) : 0;\r\n\r\n    const filteredUsers = applySortFilter(data, getComparator(order, orderBy), filterName);\r\n\r\n    const isUserNotFound = filteredUsers.length === 0;\r\n\r\n    return (\r\n        <Page title=\"User | Minimal-UI\">\r\n            <Container>\r\n                <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" mb={5}>\r\n                    <Typography variant=\"h4\" gutterBottom>\r\n                        Category\r\n                    </Typography>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        component={RouterLink}\r\n                        to=\"#\"\r\n                        startIcon={<Icon icon={plusFill}/>}\r\n                        onClick={()=>setOpenForm(!openForm)}\r\n                    >\r\n                        New Category\r\n                    </Button>\r\n                </Stack>\r\n\r\n                {openForm&&<CreateForm  dataEdit={dataEdit} handleSubmit={handleSubmit}/>}\r\n\r\n                <Card>\r\n                    <CategoryListToolbar\r\n                        numSelected={selected.length}\r\n                        selected={selected}\r\n                        handleDelete={handleDelete}\r\n                        filterName={filterName}\r\n                        onFilterName={handleFilterByName}\r\n                    />\r\n\r\n                    <Scrollbar>\r\n                        <TableContainer sx={{minWidth: 800}}>\r\n                            <Table>\r\n                                <UserListHead\r\n                                    order={order}\r\n                                    orderBy={orderBy}\r\n                                    headLabel={TABLE_HEAD}\r\n                                    rowCount={data.length}\r\n                                    numSelected={selected.length}\r\n                                    onRequestSort={handleRequestSort}\r\n                                    onSelectAllClick={handleSelectAllClick}\r\n                                />\r\n                                <TableBody>\r\n                                    {filteredUsers\r\n                                        .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                                        .map((row) => {\r\n                                            const {id, name} = row;\r\n                                            const isItemSelected = selected.indexOf(id) !== -1;\r\n\r\n                                            return (\r\n                                                <TableRow\r\n                                                    hover\r\n                                                    key={id}\r\n                                                    tabIndex={-1}\r\n                                                    role=\"checkbox\"\r\n                                                    selected={isItemSelected}\r\n                                                    aria-checked={isItemSelected}\r\n                                                >\r\n                                                    <TableCell padding=\"checkbox\">\r\n                                                        <Checkbox\r\n                                                            checked={isItemSelected}\r\n                                                            onChange={(event) => handleClick(event, id)}\r\n                                                        />\r\n                                                    </TableCell>\r\n                                                    <TableCell component=\"th\" scope=\"row\" padding=\"none\">\r\n                                                        <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\r\n                                                            <Typography variant=\"subtitle2\" noWrap>\r\n                                                                {name}\r\n                                                            </Typography>\r\n                                                        </Stack>\r\n                                                    </TableCell>\r\n\r\n\r\n                                                    <TableCell align=\"right\">\r\n                                                        <UserMoreMenu userId={id} clickButtonEdit={clickButtonEdit}/>\r\n                                                    </TableCell>\r\n                                                </TableRow>\r\n                                            );\r\n                                        })}\r\n                                    {emptyRows > 0 && (\r\n                                        <TableRow style={{height: 53 * emptyRows}}>\r\n                                            <TableCell colSpan={6}/>\r\n                                        </TableRow>\r\n                                    )}\r\n                                </TableBody>\r\n                                {isUserNotFound && (\r\n                                    <TableBody>\r\n                                        <TableRow>\r\n                                            <TableCell align=\"center\" colSpan={6} sx={{py: 3}}>\r\n                                                <SearchNotFound searchQuery={filterName}/>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    </TableBody>\r\n                                )}\r\n                            </Table>\r\n                        </TableContainer>\r\n                    </Scrollbar>\r\n\r\n                    <TablePagination\r\n                        rowsPerPageOptions={[5, 10, 25]}\r\n                        component=\"div\"\r\n                        count={data.length}\r\n                        rowsPerPage={rowsPerPage}\r\n                        page={page}\r\n                        onPageChange={handleChangePage}\r\n                        onRowsPerPageChange={handleChangeRowsPerPage}\r\n                    />\r\n                </Card>\r\n            </Container>\r\n        </Page>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}