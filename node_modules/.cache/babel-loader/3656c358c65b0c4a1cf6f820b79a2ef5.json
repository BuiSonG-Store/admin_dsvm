{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/SonBui/OneDrive/M\\xE1y t\\xEDnh/dacsanvungmien_frontent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/SonBui/OneDrive/M\\xE1y t\\xEDnh/dacsanvungmien_frontent/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\SonBui\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\dacsanvungmien_frontent\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useFormik}from'formik';import{useEffect,useState}from'react';// material\nimport{Button,Container,Stack,TableCell,TablePagination,TableRow,Typography}from'@mui/material';// components\nimport Page from'../components/Page';import{ProductSort,ProductList,ProductFilterSidebar}from'../components/_dashboard/products';//\nimport{useDispatch,useSelector}from'react-redux';import{getProduct,getProductById}from'../store/slice/products';import{unwrapResult}from'@reduxjs/toolkit';import{Link as RouterLink}from'react-router-dom';import{Icon}from'@iconify/react';import plusFill from'@iconify/icons-eva/plus-fill';import CreateForm from'../components/products/CreateForm';import CreateFormImage from'../components/products/CreateFormImage';import{filter}from'lodash';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function descendingComparator(a,b,orderBy){if(b[orderBy]<a[orderBy]){return-1;}if(b[orderBy]>a[orderBy]){return 1;}return 0;}function getComparator(order,orderBy){return order==='desc'?function(a,b){return descendingComparator(a,b,orderBy);}:function(a,b){return-descendingComparator(a,b,orderBy);};}function applySortFilter(array,comparator,query){var stabilizedThis=array.map(function(el,index){return[el,index];});stabilizedThis.sort(function(a,b){var order=comparator(a[0],b[0]);if(order!==0){return order;}return a[1]-b[1];});if(query){return filter(array,function(_user){return _user.name.toLowerCase().indexOf(query.toLowerCase())!==-1;});}return stabilizedThis.map(function(el){return el[0];});}export default function EcommerceShop(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openFilter=_useState2[0],setOpenFilter=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openForm=_useState4[0],setOpenForm=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openImageForm=_useState6[0],setOpenImageForm=_useState6[1];var dispatch=useDispatch();var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),dataEdit=_useState10[0],setDataEdit=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),productEdit=_useState12[0],setProductEdit=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isEdit=_useState14[0],setIsEdit=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isDelete=_useState16[0],setIsDelete=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),submitImage=_useState18[0],setSubmitImage=_useState18[1];var _useState19=useState(8),_useState20=_slicedToArray(_useState19,2),rowsPerPage=_useState20[0],setRowsPerPage=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),page=_useState22[0],setPage=_useState22[1];var _useState23=useState('asc'),_useState24=_slicedToArray(_useState23,1),order=_useState24[0];var _useState25=useState('name'),_useState26=_slicedToArray(_useState25,1),orderBy=_useState26[0];var _useState27=useState(''),_useState28=_slicedToArray(_useState27,1),filterName=_useState28[0];var store=useSelector(function(state){return state.products;});useEffect(function(){fetchData();},[submitImage,isEdit,isDelete]);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return dispatch(getProduct());case 3:res=_context.sent;setData(res.payload);unwrapResult(res);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();var formik=useFormik({initialValues:{gender:'',category:'',colors:'',priceRange:'',rating:''},onSubmit:function onSubmit(){setOpenFilter(false);}});var resetForm=formik.resetForm,handleSubmit=formik.handleSubmit;var handleChangePage=function handleChangePage(event,newPage){setPage(newPage);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){console.log(parseInt(event.target.value,10));setRowsPerPage(parseInt(event.target.value,10));setPage(0);};var handleOpenFilter=function handleOpenFilter(){setOpenFilter(true);};var handleCloseFilter=function handleCloseFilter(){setOpenFilter(false);};var handleResetFilter=function handleResetFilter(){handleSubmit();resetForm();};var handleFormSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setOpenForm(false);setDataEdit({});value&&setIsEdit(value);setOpenImageForm(true);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function handleFormSubmit(_x){return _ref2.apply(this,arguments);};}();var handleSubmitImage=function handleSubmitImage(value){setSubmitImage(value);setOpenImageForm(false);};var handleDeleteProduct=function handleDeleteProduct(value){value&&setIsDelete(value);};var handleClickProductName=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return dispatch(getProductById(id));case 3:res=_context3.sent;setDataEdit(res.payload);setProductEdit(res.payload.product.id);setOpenForm(true);setOpenImageForm(true);unwrapResult(res);_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function handleClickProductName(_x2){return _ref3.apply(this,arguments);};}();var emptyRows=page>0?Math.max(0,(1+page)*rowsPerPage-data.length):0;var filteredProducts=applySortFilter(data,getComparator(order,orderBy),filterName);var dataOfPage=filteredProducts.filter(function(item){return item.product.name!==undefined;}).slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage);return/*#__PURE__*/_jsx(Page,{title:\"Dashboard: Products | Minimal-UI\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",justifyContent:\"space-between\",mb:5,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{mb:5},children:\"Products\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:RouterLink,to:\"#\",startIcon:/*#__PURE__*/_jsx(Icon,{icon:plusFill}),onClick:function onClick(){return setOpenForm(!openForm);},children:\"New Product\"})]}),openForm&&/*#__PURE__*/_jsx(CreateForm,{handleFormSubmit:handleFormSubmit,dataEdit:dataEdit}),openImageForm&&/*#__PURE__*/_jsx(CreateFormImage,{submitImage:handleSubmitImage,id:store.postData.id,productEdit:productEdit}),/*#__PURE__*/_jsx(Stack,{direction:\"row\",flexWrap:\"wrap-reverse\",alignItems:\"center\",justifyContent:\"flex-end\",sx:{mb:5},children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:1,flexShrink:0,sx:{my:1},children:[/*#__PURE__*/_jsx(ProductFilterSidebar,{formik:formik,isOpenFilter:openFilter,onResetFilter:handleResetFilter,onOpenFilter:handleOpenFilter,onCloseFilter:handleCloseFilter}),/*#__PURE__*/_jsx(ProductSort,{})]})}),/*#__PURE__*/_jsx(ProductList,{items:dataOfPage,handleDeleteProduct:handleDeleteProduct,handleClickProductName:handleClickProductName}),emptyRows>0&&/*#__PURE__*/_jsx(TableRow,{style:{height:53*emptyRows},children:/*#__PURE__*/_jsx(TableCell,{colSpan:6})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[8,16,24],component:\"div\",count:data.length,rowsPerPage:rowsPerPage,page:page,onPageChange:handleChangePage,onRowsPerPageChange:handleChangeRowsPerPage})]})});}","map":{"version":3,"sources":["C:/Users/SonBui/OneDrive/Máy tính/dacsanvungmien_frontent/src/pages/Products.js"],"names":["useFormik","useEffect","useState","Button","Container","Stack","TableCell","TablePagination","TableRow","Typography","Page","ProductSort","ProductList","ProductFilterSidebar","useDispatch","useSelector","getProduct","getProductById","unwrapResult","Link","RouterLink","Icon","plusFill","CreateForm","CreateFormImage","filter","descendingComparator","a","b","orderBy","getComparator","order","applySortFilter","array","comparator","query","stabilizedThis","map","el","index","sort","_user","name","toLowerCase","indexOf","EcommerceShop","openFilter","setOpenFilter","openForm","setOpenForm","openImageForm","setOpenImageForm","dispatch","data","setData","dataEdit","setDataEdit","productEdit","setProductEdit","isEdit","setIsEdit","isDelete","setIsDelete","submitImage","setSubmitImage","rowsPerPage","setRowsPerPage","page","setPage","filterName","store","state","products","fetchData","res","payload","console","log","formik","initialValues","gender","category","colors","priceRange","rating","onSubmit","resetForm","handleSubmit","handleChangePage","event","newPage","handleChangeRowsPerPage","parseInt","target","value","handleOpenFilter","handleCloseFilter","handleResetFilter","handleFormSubmit","handleSubmitImage","handleDeleteProduct","handleClickProductName","id","product","emptyRows","Math","max","length","filteredProducts","dataOfPage","item","undefined","slice","mb","postData","my","height"],"mappings":"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","sourcesContent":["import {useFormik} from 'formik';\r\nimport {useEffect, useState} from 'react';\r\n// material\r\nimport {Button, Container, Stack, TableCell, TablePagination, TableRow, Typography} from '@mui/material';\r\n// components\r\nimport Page from '../components/Page';\r\nimport {\r\n    ProductSort,\r\n    ProductList,\r\n    ProductFilterSidebar\r\n} from '../components/_dashboard/products';\r\n//\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {getProduct, getProductById} from '../store/slice/products';\r\nimport {unwrapResult} from '@reduxjs/toolkit';\r\nimport {Link as RouterLink} from 'react-router-dom';\r\nimport {Icon} from '@iconify/react';\r\nimport plusFill from '@iconify/icons-eva/plus-fill';\r\nimport CreateForm from '../components/products/CreateForm';\r\nimport CreateFormImage from '../components/products/CreateFormImage';\r\nimport {filter} from 'lodash';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n    if (b[orderBy] < a[orderBy]) {\r\n        return -1;\r\n    }\r\n    if (b[orderBy] > a[orderBy]) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n    return order === 'desc'\r\n        ? (a, b) => descendingComparator(a, b, orderBy)\r\n        : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction applySortFilter(array, comparator, query) {\r\n    const stabilizedThis = array.map((el, index) => [el, index]);\r\n    stabilizedThis.sort((a, b) => {\r\n        const order = comparator(a[0], b[0]);\r\n        if (order !== 0) {\r\n            return order;\r\n        }\r\n        return a[1] - b[1];\r\n    });\r\n    if (query) {\r\n        return filter(array, (_user) => _user.name.toLowerCase().indexOf(query.toLowerCase()) !== -1);\r\n    }\r\n    return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\n\r\nexport default function EcommerceShop() {\r\n    const [openFilter, setOpenFilter] = useState(false);\r\n    const [openForm, setOpenForm] = useState(false);\r\n    const [openImageForm, setOpenImageForm] = useState(false);\r\n    const dispatch = useDispatch();\r\n    const [data, setData] = useState([]);\r\n    const [dataEdit, setDataEdit] = useState([]);\r\n    const [productEdit, setProductEdit] = useState(null);\r\n    const [isEdit, setIsEdit] = useState(false);\r\n    const [isDelete, setIsDelete] = useState(false);\r\n    const [submitImage, setSubmitImage] = useState(false);\r\n    const [rowsPerPage, setRowsPerPage] = useState(8);\r\n    const [page, setPage] = useState(0);\r\n    const [order] = useState('asc');\r\n    const [orderBy] = useState('name');\r\n    const [filterName] = useState('');\r\n    const store=useSelector(state=>state.products);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [submitImage, isEdit, isDelete]);\r\n\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const res = await dispatch(getProduct());\r\n            setData(res.payload);\r\n\r\n            unwrapResult(res);\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            gender: '',\r\n            category: '',\r\n            colors: '',\r\n            priceRange: '',\r\n            rating: ''\r\n        },\r\n        onSubmit: () => {\r\n            setOpenFilter(false);\r\n        }\r\n    });\r\n\r\n    const {resetForm, handleSubmit} = formik;\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n        setPage(newPage);\r\n    };\r\n\r\n    const handleChangeRowsPerPage = (event) => {\r\n        console.log(parseInt(event.target.value, 10));\r\n        setRowsPerPage(parseInt(event.target.value, 10));\r\n        setPage(0);\r\n    };\r\n\r\n\r\n    const handleOpenFilter = () => {\r\n        setOpenFilter(true);\r\n    };\r\n\r\n    const handleCloseFilter = () => {\r\n        setOpenFilter(false);\r\n    };\r\n\r\n    const handleResetFilter = () => {\r\n        handleSubmit();\r\n        resetForm();\r\n    };\r\n\r\n\r\n    const handleFormSubmit = async (value) => {\r\n        setOpenForm(false);\r\n        setDataEdit({});\r\n        value && setIsEdit(value);\r\n        setOpenImageForm(true);\r\n    };\r\n\r\n    const handleSubmitImage = (value) => {\r\n        setSubmitImage(value);\r\n        setOpenImageForm(false);\r\n    };\r\n\r\n    const handleDeleteProduct=(value)=>{\r\n        value&&setIsDelete(value);\r\n    };\r\n\r\n    const handleClickProductName = async (id) => {\r\n        try {\r\n            const res = await dispatch(getProductById(id));\r\n            setDataEdit(res.payload);\r\n            setProductEdit(res.payload.product.id);\r\n            setOpenForm(true);\r\n            setOpenImageForm(true);\r\n            unwrapResult(res);\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    const emptyRows = page > 0 ? Math.max(0, (1 + page) * rowsPerPage - data.length) : 0;\r\n    const filteredProducts = applySortFilter(data, getComparator(order, orderBy), filterName);\r\n\r\n    const dataOfPage = filteredProducts.filter(item => item.product.name !== undefined)\r\n        .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage);\r\n\r\n    return (\r\n        <Page title=\"Dashboard: Products | Minimal-UI\">\r\n            <Container>\r\n                <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" mb={5}>\r\n                    <Typography variant=\"h4\" sx={{mb: 5}}>\r\n                        Products\r\n                    </Typography>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        component={RouterLink}\r\n                        to=\"#\"\r\n                        startIcon={<Icon icon={plusFill}/>}\r\n                        onClick={() => setOpenForm(!openForm)}\r\n                    >\r\n                        New Product\r\n                    </Button>\r\n                </Stack>\r\n\r\n                {openForm && <CreateForm handleFormSubmit={handleFormSubmit} dataEdit={dataEdit}/>}\r\n                {openImageForm && <CreateFormImage submitImage={handleSubmitImage} id={store.postData.id} productEdit={productEdit}/>}\r\n                <Stack\r\n                    direction=\"row\"\r\n                    flexWrap=\"wrap-reverse\"\r\n                    alignItems=\"center\"\r\n                    justifyContent=\"flex-end\"\r\n                    sx={{mb: 5}}\r\n                >\r\n                    <Stack direction=\"row\" spacing={1} flexShrink={0} sx={{my: 1}}>\r\n                        <ProductFilterSidebar\r\n                            formik={formik}\r\n                            isOpenFilter={openFilter}\r\n                            onResetFilter={handleResetFilter}\r\n                            onOpenFilter={handleOpenFilter}\r\n                            onCloseFilter={handleCloseFilter}\r\n                        />\r\n                        <ProductSort/>\r\n                    </Stack>\r\n                </Stack>\r\n\r\n                <ProductList\r\n                    items={dataOfPage}\r\n                    handleDeleteProduct={handleDeleteProduct}\r\n                    handleClickProductName={handleClickProductName}/>\r\n                {emptyRows > 0 && (\r\n                    <TableRow style={{height: 53 * emptyRows}}>\r\n                        <TableCell colSpan={6}/>\r\n                    </TableRow>\r\n                )}\r\n                <TablePagination\r\n                    rowsPerPageOptions={[8, 16, 24]}\r\n                    component=\"div\"\r\n                    count={data.length}\r\n                    rowsPerPage={rowsPerPage}\r\n                    page={page}\r\n                    onPageChange={handleChangePage}\r\n                    onRowsPerPageChange={handleChangeRowsPerPage}\r\n                />\r\n            </Container>\r\n        </Page>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}