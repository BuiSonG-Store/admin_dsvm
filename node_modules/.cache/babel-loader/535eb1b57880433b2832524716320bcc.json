{"ast":null,"code":"import _objectSpread from\"C:/Users/SonBui/OneDrive/M\\xE1y t\\xEDnh/dacsanvungmien_frontent/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/SonBui/OneDrive/M\\xE1y t\\xEDnh/dacsanvungmien_frontent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/SonBui/OneDrive/M\\xE1y t\\xEDnh/dacsanvungmien_frontent/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\SonBui\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\dacsanvungmien_frontent\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import*as Yup from'yup';import{useState}from'react';import{Link as RouterLink}from'react-router-dom';import{useFormik,Form,FormikProvider}from'formik';import{Icon}from'@iconify/react';import eyeFill from'@iconify/icons-eva/eye-fill';import eyeOffFill from'@iconify/icons-eva/eye-off-fill';// material\nimport{Link,Stack,Checkbox,TextField,IconButton,InputAdornment,FormControlLabel}from'@mui/material';import{LoadingButton}from'@mui/lab';import{useDispatch}from'react-redux';import{userLogin}from'../../../store/slice/loginAndLogout';import{unwrapResult}from'@reduxjs/toolkit';import{setSessionStorage}from'../../../utils/sessionStorage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";Date.prototype.addDays=function(days){var date=new Date(this.valueOf());date.setDate(date.getDate()+days);return date;};// ----------------------------------------------------------------------\nexport default function LoginForm(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPassword=_useState2[0],setShowPassword=_useState2[1];var dispatch=useDispatch();var LoginSchema=Yup.object().shape({email:Yup.string().email('Email must be a valid email address').required('Email is required'),password:Yup.string().required('Password is required').min(6).required('the password must be at least 6 characters')});var formik=useFormik({initialValues:{email:'',password:'',remember:true},validationSchema:LoginSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var resetForm,res,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:resetForm=_ref.resetForm;_context.prev=1;_context.next=4;return dispatch(userLogin({email:values.email,password:values.password}));case 4:res=_context.sent;unwrapResult(res);user=res.payload;setSessionStorage(user);resetForm();window.location.href='/dashboard/app';_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var errors=formik.errors,touched=formik.touched,values=formik.values,isSubmitting=formik.isSubmitting,handleSubmit=formik.handleSubmit,getFieldProps=formik.getFieldProps;var handleShowPassword=function handleShowPassword(){setShowPassword(function(show){return!show;});};return/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsxs(Form,{autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,autoComplete:\"username\",type:\"email\",label:\"Email address\",value:values.email},getFieldProps('email')),{},{error:Boolean(touched.email&&errors.email),helperText:touched.email&&errors.email})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,autoComplete:\"current-password\",type:showPassword?'text':'password',label:\"Password\",value:values.password},getFieldProps('password')),{},{InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:handleShowPassword,edge:\"end\",children:/*#__PURE__*/_jsx(Icon,{icon:showPassword?eyeFill:eyeOffFill})})})},error:Boolean(touched.password&&errors.password),helperText:touched.password&&errors.password}))]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",justifyContent:\"space-between\",sx:{my:2},children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,_objectSpread(_objectSpread({},getFieldProps('remember')),{},{checked:values.remember})),label:\"Remember me\"}),/*#__PURE__*/_jsx(Link,{component:RouterLink,variant:\"subtitle2\",to:\"#\",children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(LoadingButton,{fullWidth:true,size:\"large\",type:\"submit\",variant:\"contained\",loading:isSubmitting,children:\"Login\"})]})});}","map":{"version":3,"sources":["C:/Users/SonBui/OneDrive/Máy tính/dacsanvungmien_frontent/src/components/authentication/login/LoginForm.js"],"names":["Yup","useState","Link","RouterLink","useFormik","Form","FormikProvider","Icon","eyeFill","eyeOffFill","Stack","Checkbox","TextField","IconButton","InputAdornment","FormControlLabel","LoadingButton","useDispatch","userLogin","unwrapResult","setSessionStorage","Date","prototype","addDays","days","date","valueOf","setDate","getDate","LoginForm","showPassword","setShowPassword","dispatch","LoginSchema","object","shape","email","string","required","password","min","formik","initialValues","remember","validationSchema","onSubmit","values","resetForm","res","user","payload","window","location","href","console","log","errors","touched","isSubmitting","handleSubmit","getFieldProps","handleShowPassword","show","Boolean","endAdornment","my"],"mappings":"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","sourcesContent":["import * as Yup from 'yup';\r\nimport {useState} from 'react';\r\nimport {Link as RouterLink} from 'react-router-dom';\r\nimport {useFormik, Form, FormikProvider} from 'formik';\r\nimport {Icon} from '@iconify/react';\r\nimport eyeFill from '@iconify/icons-eva/eye-fill';\r\nimport eyeOffFill from '@iconify/icons-eva/eye-off-fill';\r\n// material\r\nimport {\r\n    Link, Stack, Checkbox, TextField, IconButton, InputAdornment, FormControlLabel\r\n} from '@mui/material';\r\nimport {LoadingButton} from '@mui/lab';\r\nimport {useDispatch} from 'react-redux';\r\nimport {userLogin} from '../../../store/slice/loginAndLogout';\r\nimport {unwrapResult} from '@reduxjs/toolkit';\r\nimport {setSessionStorage} from '../../../utils/sessionStorage';\r\n\r\nDate.prototype.addDays = function(days) {\r\n    const date = new Date(this.valueOf());\r\n    date.setDate(date.getDate() + days);\r\n    return date;\r\n};\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport default function LoginForm() {\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const dispatch = useDispatch();\r\n\r\n    const LoginSchema = Yup.object().shape({\r\n        email: Yup.string().email('Email must be a valid email address').required('Email is required'),\r\n        password: Yup.string().required('Password is required').min(6).required('the password must be at least 6 characters')\r\n    });\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            email: '', password: '', remember: true\r\n        },\r\n        validationSchema: LoginSchema, onSubmit: async (values, {resetForm}) => {\r\n            try {\r\n                const res = await dispatch(userLogin({\r\n                    email: values.email, password: values.password\r\n                }));\r\n                unwrapResult(res);\r\n                const user=res.payload;\r\n                setSessionStorage(user);\r\n                resetForm();\r\n                window.location.href='/dashboard/app';\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n    });\r\n\r\n    const {errors, touched, values, isSubmitting, handleSubmit, getFieldProps} = formik;\r\n\r\n    const handleShowPassword = () => {\r\n        setShowPassword((show) => !show);\r\n    };\r\n\r\n    return (<FormikProvider value={formik}>\r\n        <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit}>\r\n            <Stack spacing={3}>\r\n                <TextField\r\n                    fullWidth\r\n                    autoComplete=\"username\"\r\n                    type=\"email\"\r\n                    label=\"Email address\"\r\n                    value={values.email}\r\n                    {...getFieldProps('email')}\r\n                    error={Boolean(touched.email && errors.email)}\r\n                    helperText={touched.email && errors.email}\r\n                />\r\n\r\n                <TextField\r\n                    fullWidth\r\n                    autoComplete=\"current-password\"\r\n                    type={showPassword ? 'text' : 'password'}\r\n                    label=\"Password\"\r\n                    value={values.password}\r\n                    {...getFieldProps('password')}\r\n                    InputProps={{\r\n                        endAdornment: (<InputAdornment position=\"end\">\r\n                            <IconButton onClick={handleShowPassword} edge=\"end\">\r\n                                <Icon icon={showPassword ? eyeFill : eyeOffFill}/>\r\n                            </IconButton>\r\n                        </InputAdornment>)\r\n                    }}\r\n                    error={Boolean(touched.password && errors.password)}\r\n                    helperText={touched.password && errors.password}\r\n                />\r\n            </Stack>\r\n\r\n            <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" sx={{my: 2}}>\r\n                <FormControlLabel\r\n                    control={<Checkbox {...getFieldProps('remember')} checked={values.remember}/>}\r\n                    label=\"Remember me\"\r\n                />\r\n\r\n                <Link component={RouterLink} variant=\"subtitle2\" to=\"#\">\r\n                    Forgot password?\r\n                </Link>\r\n            </Stack>\r\n\r\n            <LoadingButton\r\n                fullWidth\r\n                size=\"large\"\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                loading={isSubmitting}\r\n            >\r\n                Login\r\n            </LoadingButton>\r\n        </Form>\r\n    </FormikProvider>);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}