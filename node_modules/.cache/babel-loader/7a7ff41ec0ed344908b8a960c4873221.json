{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SonBui\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\dacsanvungmien_frontent\\\\src\\\\pages\\\\Products.js\",\n    _s = $RefreshSig$();\n\nimport { useFormik } from 'formik';\nimport { useEffect, useState } from 'react'; // material\n\nimport { Button, Container, Stack, TableCell, TablePagination, TableRow, Typography } from '@mui/material'; // components\n\nimport Page from '../components/Page';\nimport { ProductSort, ProductList, ProductFilterSidebar } from '../components/_dashboard/products'; //\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getProduct, getProductById } from '../store/slice/products';\nimport { unwrapResult } from '@reduxjs/toolkit';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { Icon } from '@iconify/react';\nimport plusFill from '@iconify/icons-eva/plus-fill';\nimport CreateForm from '../components/products/CreateForm';\nimport CreateFormImage from '../components/products/CreateFormImage';\nimport { filter } from 'lodash'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction getComparator(order, orderBy) {\n  return order === 'desc' ? (a, b) => descendingComparator(a, b, orderBy) : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction applySortFilter(array, comparator, query) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n\n    if (order !== 0) {\n      return order;\n    }\n\n    return a[1] - b[1];\n  });\n\n  if (query) {\n    return filter(array, _user => _user.name.toLowerCase().indexOf(query.toLowerCase()) !== -1);\n  }\n\n  return stabilizedThis.map(el => el[0]);\n}\n\nexport default function EcommerceShop() {\n  _s();\n\n  const [openFilter, setOpenFilter] = useState(false);\n  const [openForm, setOpenForm] = useState(false);\n  const [openImageForm, setOpenImageForm] = useState(false);\n  const dispatch = useDispatch();\n  const [data, setData] = useState([]);\n  const [dataEdit, setDataEdit] = useState([]);\n  const [productEdit, setProductEdit] = useState(null);\n  const [isEdit, setIsEdit] = useState(false);\n  const [isDelete, setIsDelete] = useState(false);\n  const [submitImage, setSubmitImage] = useState(false);\n  const [rowsPerPage, setRowsPerPage] = useState(8);\n  const [page, setPage] = useState(0);\n  const [order] = useState('asc');\n  const [orderBy] = useState('name');\n  const [filterName] = useState('');\n  const store = useSelector(state => state.products);\n  useEffect(() => {\n    fetchData();\n  }, [submitImage, isEdit, isDelete]);\n\n  const fetchData = async () => {\n    try {\n      const res = await dispatch(getProduct());\n      setData(res.payload);\n      unwrapResult(res);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const formik = useFormik({\n    initialValues: {\n      gender: '',\n      category: '',\n      colors: '',\n      priceRange: '',\n      rating: ''\n    },\n    onSubmit: () => {\n      setOpenFilter(false);\n    }\n  });\n  const {\n    resetForm,\n    handleSubmit\n  } = formik;\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    console.log(parseInt(event.target.value, 10));\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const handleOpenFilter = () => {\n    setOpenFilter(true);\n  };\n\n  const handleCloseFilter = () => {\n    setOpenFilter(false);\n  };\n\n  const handleResetFilter = () => {\n    handleSubmit();\n    resetForm();\n  };\n\n  const handleFormSubmit = async value => {\n    setOpenForm(false);\n    setDataEdit({});\n    value && setIsEdit(value);\n    setOpenImageForm(true);\n  };\n\n  const handleSubmitImage = value => {\n    setSubmitImage(value);\n    setOpenImageForm(false);\n  };\n\n  const handleDeleteProduct = value => {\n    value && setIsDelete(value);\n  };\n\n  const handleClickProductName = async id => {\n    try {\n      const res = await dispatch(getProductById(id));\n      setDataEdit(res.payload);\n      setProductEdit(res.payload.product.id);\n      setOpenForm(true);\n      setOpenImageForm(true);\n      unwrapResult(res);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const emptyRows = page > 0 ? Math.max(0, (1 + page) * rowsPerPage - data.length) : 0;\n  const filteredProducts = applySortFilter(data, getComparator(order, orderBy), filterName);\n  const dataOfPage = filteredProducts.filter(item => item.product.name !== undefined).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage);\n  return /*#__PURE__*/_jsxDEV(Page, {\n    title: \"Dashboard: Products | Minimal-UI\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        mb: 5,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          sx: {\n            mb: 5\n          },\n          children: \"Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          component: RouterLink,\n          to: \"#\",\n          startIcon: /*#__PURE__*/_jsxDEV(Icon, {\n            icon: plusFill\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 36\n          }, this),\n          onClick: () => setOpenForm(!openForm),\n          children: \"New Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this), openForm && /*#__PURE__*/_jsxDEV(CreateForm, {\n        handleFormSubmit: handleFormSubmit,\n        dataEdit: dataEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 30\n      }, this), openImageForm && /*#__PURE__*/_jsxDEV(CreateFormImage, {\n        submitImage: handleSubmitImage,\n        id: store.postData.id,\n        productEdit: productEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"row\",\n        flexWrap: \"wrap-reverse\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n        sx: {\n          mb: 5\n        },\n        children: /*#__PURE__*/_jsxDEV(Stack, {\n          direction: \"row\",\n          spacing: 1,\n          flexShrink: 0,\n          sx: {\n            my: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(ProductFilterSidebar, {\n            formik: formik,\n            isOpenFilter: openFilter,\n            onResetFilter: handleResetFilter,\n            onOpenFilter: handleOpenFilter,\n            onCloseFilter: handleCloseFilter\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ProductSort, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ProductList, {\n        items: dataOfPage,\n        handleDeleteProduct: handleDeleteProduct,\n        handleClickProductName: handleClickProductName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this), emptyRows > 0 && /*#__PURE__*/_jsxDEV(TableRow, {\n        style: {\n          height: 53 * emptyRows\n        },\n        children: /*#__PURE__*/_jsxDEV(TableCell, {\n          colSpan: 6\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n        rowsPerPageOptions: [8, 16, 24],\n        component: \"div\",\n        count: data.length,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        onPageChange: handleChangePage,\n        onRowsPerPageChange: handleChangeRowsPerPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 9\n  }, this);\n}\n\n_s(EcommerceShop, \"IsQ535goUx61WOo+vsa2tKkgTrc=\", false, function () {\n  return [useDispatch, useSelector, useFormik];\n});\n\n_c = EcommerceShop;\n\nvar _c;\n\n$RefreshReg$(_c, \"EcommerceShop\");","map":{"version":3,"sources":["C:/Users/SonBui/OneDrive/Máy tính/dacsanvungmien_frontent/src/pages/Products.js"],"names":["useFormik","useEffect","useState","Button","Container","Stack","TableCell","TablePagination","TableRow","Typography","Page","ProductSort","ProductList","ProductFilterSidebar","useDispatch","useSelector","getProduct","getProductById","unwrapResult","Link","RouterLink","Icon","plusFill","CreateForm","CreateFormImage","filter","descendingComparator","a","b","orderBy","getComparator","order","applySortFilter","array","comparator","query","stabilizedThis","map","el","index","sort","_user","name","toLowerCase","indexOf","EcommerceShop","openFilter","setOpenFilter","openForm","setOpenForm","openImageForm","setOpenImageForm","dispatch","data","setData","dataEdit","setDataEdit","productEdit","setProductEdit","isEdit","setIsEdit","isDelete","setIsDelete","submitImage","setSubmitImage","rowsPerPage","setRowsPerPage","page","setPage","filterName","store","state","products","fetchData","res","payload","e","console","log","formik","initialValues","gender","category","colors","priceRange","rating","onSubmit","resetForm","handleSubmit","handleChangePage","event","newPage","handleChangeRowsPerPage","parseInt","target","value","handleOpenFilter","handleCloseFilter","handleResetFilter","handleFormSubmit","handleSubmitImage","handleDeleteProduct","handleClickProductName","id","product","emptyRows","Math","max","length","filteredProducts","dataOfPage","item","undefined","slice","mb","postData","my","height"],"mappings":";;;AAAA,SAAQA,SAAR,QAAwB,QAAxB;AACA,SAAQC,SAAR,EAAmBC,QAAnB,QAAkC,OAAlC,C,CACA;;AACA,SAAQC,MAAR,EAAgBC,SAAhB,EAA2BC,KAA3B,EAAkCC,SAAlC,EAA6CC,eAA7C,EAA8DC,QAA9D,EAAwEC,UAAxE,QAAyF,eAAzF,C,CACA;;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,SACIC,WADJ,EAEIC,WAFJ,EAGIC,oBAHJ,QAIO,mCAJP,C,CAKA;;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,UAAR,EAAoBC,cAApB,QAAyC,yBAAzC;AACA,SAAQC,YAAR,QAA2B,kBAA3B;AACA,SAAQC,IAAI,IAAIC,UAAhB,QAAiC,kBAAjC;AACA,SAAQC,IAAR,QAAmB,gBAAnB;AACA,OAAOC,QAAP,MAAqB,8BAArB;AACA,OAAOC,UAAP,MAAuB,mCAAvB;AACA,OAAOC,eAAP,MAA4B,wCAA5B;AACA,SAAQC,MAAR,QAAqB,QAArB,C,CAEA;;;;AAGA,SAASC,oBAAT,CAA8BC,CAA9B,EAAiCC,CAAjC,EAAoCC,OAApC,EAA6C;AACzC,MAAID,CAAC,CAACC,OAAD,CAAD,GAAaF,CAAC,CAACE,OAAD,CAAlB,EAA6B;AACzB,WAAO,CAAC,CAAR;AACH;;AACD,MAAID,CAAC,CAACC,OAAD,CAAD,GAAaF,CAAC,CAACE,OAAD,CAAlB,EAA6B;AACzB,WAAO,CAAP;AACH;;AACD,SAAO,CAAP;AACH;;AAED,SAASC,aAAT,CAAuBC,KAAvB,EAA8BF,OAA9B,EAAuC;AACnC,SAAOE,KAAK,KAAK,MAAV,GACD,CAACJ,CAAD,EAAIC,CAAJ,KAAUF,oBAAoB,CAACC,CAAD,EAAIC,CAAJ,EAAOC,OAAP,CAD7B,GAED,CAACF,CAAD,EAAIC,CAAJ,KAAU,CAACF,oBAAoB,CAACC,CAAD,EAAIC,CAAJ,EAAOC,OAAP,CAFrC;AAGH;;AAED,SAASG,eAAT,CAAyBC,KAAzB,EAAgCC,UAAhC,EAA4CC,KAA5C,EAAmD;AAC/C,QAAMC,cAAc,GAAGH,KAAK,CAACI,GAAN,CAAU,CAACC,EAAD,EAAKC,KAAL,KAAe,CAACD,EAAD,EAAKC,KAAL,CAAzB,CAAvB;AACAH,EAAAA,cAAc,CAACI,IAAf,CAAoB,CAACb,CAAD,EAAIC,CAAJ,KAAU;AAC1B,UAAMG,KAAK,GAAGG,UAAU,CAACP,CAAC,CAAC,CAAD,CAAF,EAAOC,CAAC,CAAC,CAAD,CAAR,CAAxB;;AACA,QAAIG,KAAK,KAAK,CAAd,EAAiB;AACb,aAAOA,KAAP;AACH;;AACD,WAAOJ,CAAC,CAAC,CAAD,CAAD,GAAOC,CAAC,CAAC,CAAD,CAAf;AACH,GAND;;AAOA,MAAIO,KAAJ,EAAW;AACP,WAAOV,MAAM,CAACQ,KAAD,EAASQ,KAAD,IAAWA,KAAK,CAACC,IAAN,CAAWC,WAAX,GAAyBC,OAAzB,CAAiCT,KAAK,CAACQ,WAAN,EAAjC,MAA0D,CAAC,CAA9E,CAAb;AACH;;AACD,SAAOP,cAAc,CAACC,GAAf,CAAoBC,EAAD,IAAQA,EAAE,CAAC,CAAD,CAA7B,CAAP;AACH;;AAGD,eAAe,SAASO,aAAT,GAAyB;AAAA;;AACpC,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8B7C,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAAC8C,QAAD,EAAWC,WAAX,IAA0B/C,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAACgD,aAAD,EAAgBC,gBAAhB,IAAoCjD,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAMkD,QAAQ,GAAGtC,WAAW,EAA5B;AACA,QAAM,CAACuC,IAAD,EAAOC,OAAP,IAAkBpD,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACqD,QAAD,EAAWC,WAAX,IAA0BtD,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACuD,WAAD,EAAcC,cAAd,IAAgCxD,QAAQ,CAAC,IAAD,CAA9C;AACA,QAAM,CAACyD,MAAD,EAASC,SAAT,IAAsB1D,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAAC2D,QAAD,EAAWC,WAAX,IAA0B5D,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAAC6D,WAAD,EAAcC,cAAd,IAAgC9D,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAAC+D,WAAD,EAAcC,cAAd,IAAgChE,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM,CAACiE,IAAD,EAAOC,OAAP,IAAkBlE,QAAQ,CAAC,CAAD,CAAhC;AACA,QAAM,CAAC6B,KAAD,IAAU7B,QAAQ,CAAC,KAAD,CAAxB;AACA,QAAM,CAAC2B,OAAD,IAAY3B,QAAQ,CAAC,MAAD,CAA1B;AACA,QAAM,CAACmE,UAAD,IAAenE,QAAQ,CAAC,EAAD,CAA7B;AACA,QAAMoE,KAAK,GAACvD,WAAW,CAACwD,KAAK,IAAEA,KAAK,CAACC,QAAd,CAAvB;AAEAvE,EAAAA,SAAS,CAAC,MAAM;AACZwE,IAAAA,SAAS;AACZ,GAFQ,EAEN,CAACV,WAAD,EAAcJ,MAAd,EAAsBE,QAAtB,CAFM,CAAT;;AAKA,QAAMY,SAAS,GAAG,YAAY;AAC1B,QAAI;AACA,YAAMC,GAAG,GAAG,MAAMtB,QAAQ,CAACpC,UAAU,EAAX,CAA1B;AACAsC,MAAAA,OAAO,CAACoB,GAAG,CAACC,OAAL,CAAP;AAEAzD,MAAAA,YAAY,CAACwD,GAAD,CAAZ;AACH,KALD,CAKE,OAAOE,CAAP,EAAU;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH;AACJ,GATD;;AAWA,QAAMG,MAAM,GAAG/E,SAAS,CAAC;AACrBgF,IAAAA,aAAa,EAAE;AACXC,MAAAA,MAAM,EAAE,EADG;AAEXC,MAAAA,QAAQ,EAAE,EAFC;AAGXC,MAAAA,MAAM,EAAE,EAHG;AAIXC,MAAAA,UAAU,EAAE,EAJD;AAKXC,MAAAA,MAAM,EAAE;AALG,KADM;AAQrBC,IAAAA,QAAQ,EAAE,MAAM;AACZvC,MAAAA,aAAa,CAAC,KAAD,CAAb;AACH;AAVoB,GAAD,CAAxB;AAaA,QAAM;AAACwC,IAAAA,SAAD;AAAYC,IAAAA;AAAZ,MAA4BT,MAAlC;;AAEA,QAAMU,gBAAgB,GAAG,CAACC,KAAD,EAAQC,OAAR,KAAoB;AACzCvB,IAAAA,OAAO,CAACuB,OAAD,CAAP;AACH,GAFD;;AAIA,QAAMC,uBAAuB,GAAIF,KAAD,IAAW;AACvCb,IAAAA,OAAO,CAACC,GAAR,CAAYe,QAAQ,CAACH,KAAK,CAACI,MAAN,CAAaC,KAAd,EAAqB,EAArB,CAApB;AACA7B,IAAAA,cAAc,CAAC2B,QAAQ,CAACH,KAAK,CAACI,MAAN,CAAaC,KAAd,EAAqB,EAArB,CAAT,CAAd;AACA3B,IAAAA,OAAO,CAAC,CAAD,CAAP;AACH,GAJD;;AAOA,QAAM4B,gBAAgB,GAAG,MAAM;AAC3BjD,IAAAA,aAAa,CAAC,IAAD,CAAb;AACH,GAFD;;AAIA,QAAMkD,iBAAiB,GAAG,MAAM;AAC5BlD,IAAAA,aAAa,CAAC,KAAD,CAAb;AACH,GAFD;;AAIA,QAAMmD,iBAAiB,GAAG,MAAM;AAC5BV,IAAAA,YAAY;AACZD,IAAAA,SAAS;AACZ,GAHD;;AAMA,QAAMY,gBAAgB,GAAG,MAAOJ,KAAP,IAAiB;AACtC9C,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAO,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAuC,IAAAA,KAAK,IAAInC,SAAS,CAACmC,KAAD,CAAlB;AACA5C,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACH,GALD;;AAOA,QAAMiD,iBAAiB,GAAIL,KAAD,IAAW;AACjC/B,IAAAA,cAAc,CAAC+B,KAAD,CAAd;AACA5C,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACH,GAHD;;AAKA,QAAMkD,mBAAmB,GAAEN,KAAD,IAAS;AAC/BA,IAAAA,KAAK,IAAEjC,WAAW,CAACiC,KAAD,CAAlB;AACH,GAFD;;AAIA,QAAMO,sBAAsB,GAAG,MAAOC,EAAP,IAAc;AACzC,QAAI;AACA,YAAM7B,GAAG,GAAG,MAAMtB,QAAQ,CAACnC,cAAc,CAACsF,EAAD,CAAf,CAA1B;AACA/C,MAAAA,WAAW,CAACkB,GAAG,CAACC,OAAL,CAAX;AACAjB,MAAAA,cAAc,CAACgB,GAAG,CAACC,OAAJ,CAAY6B,OAAZ,CAAoBD,EAArB,CAAd;AACAtD,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAjC,MAAAA,YAAY,CAACwD,GAAD,CAAZ;AACH,KAPD,CAOE,OAAOE,CAAP,EAAU;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH;AACJ,GAXD;;AAaA,QAAM6B,SAAS,GAAGtC,IAAI,GAAG,CAAP,GAAWuC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,CAAC,IAAIxC,IAAL,IAAaF,WAAb,GAA2BZ,IAAI,CAACuD,MAA5C,CAAX,GAAiE,CAAnF;AACA,QAAMC,gBAAgB,GAAG7E,eAAe,CAACqB,IAAD,EAAOvB,aAAa,CAACC,KAAD,EAAQF,OAAR,CAApB,EAAsCwC,UAAtC,CAAxC;AAEA,QAAMyC,UAAU,GAAGD,gBAAgB,CAACpF,MAAjB,CAAwBsF,IAAI,IAAIA,IAAI,CAACP,OAAL,CAAa9D,IAAb,KAAsBsE,SAAtD,EACdC,KADc,CACR9C,IAAI,GAAGF,WADC,EACYE,IAAI,GAAGF,WAAP,GAAqBA,WADjC,CAAnB;AAGA,sBACI,QAAC,IAAD;AAAM,IAAA,KAAK,EAAC,kCAAZ;AAAA,2BACI,QAAC,SAAD;AAAA,8BACI,QAAC,KAAD;AAAO,QAAA,SAAS,EAAC,KAAjB;AAAuB,QAAA,UAAU,EAAC,QAAlC;AAA2C,QAAA,cAAc,EAAC,eAA1D;AAA0E,QAAA,EAAE,EAAE,CAA9E;AAAA,gCACI,QAAC,UAAD;AAAY,UAAA,OAAO,EAAC,IAApB;AAAyB,UAAA,EAAE,EAAE;AAACiD,YAAAA,EAAE,EAAE;AAAL,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII,QAAC,MAAD;AACI,UAAA,OAAO,EAAC,WADZ;AAEI,UAAA,SAAS,EAAE9F,UAFf;AAGI,UAAA,EAAE,EAAC,GAHP;AAII,UAAA,SAAS,eAAE,QAAC,IAAD;AAAM,YAAA,IAAI,EAAEE;AAAZ;AAAA;AAAA;AAAA;AAAA,kBAJf;AAKI,UAAA,OAAO,EAAE,MAAM2B,WAAW,CAAC,CAACD,QAAF,CAL9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAgBKA,QAAQ,iBAAI,QAAC,UAAD;AAAY,QAAA,gBAAgB,EAAEmD,gBAA9B;AAAgD,QAAA,QAAQ,EAAE5C;AAA1D;AAAA;AAAA;AAAA;AAAA,cAhBjB,EAiBKL,aAAa,iBAAI,QAAC,eAAD;AAAiB,QAAA,WAAW,EAAEkD,iBAA9B;AAAiD,QAAA,EAAE,EAAE9B,KAAK,CAAC6C,QAAN,CAAeZ,EAApE;AAAwE,QAAA,WAAW,EAAE9C;AAArF;AAAA;AAAA;AAAA;AAAA,cAjBtB,eAkBI,QAAC,KAAD;AACI,QAAA,SAAS,EAAC,KADd;AAEI,QAAA,QAAQ,EAAC,cAFb;AAGI,QAAA,UAAU,EAAC,QAHf;AAII,QAAA,cAAc,EAAC,UAJnB;AAKI,QAAA,EAAE,EAAE;AAACyD,UAAAA,EAAE,EAAE;AAAL,SALR;AAAA,+BAOI,QAAC,KAAD;AAAO,UAAA,SAAS,EAAC,KAAjB;AAAuB,UAAA,OAAO,EAAE,CAAhC;AAAmC,UAAA,UAAU,EAAE,CAA/C;AAAkD,UAAA,EAAE,EAAE;AAACE,YAAAA,EAAE,EAAE;AAAL,WAAtD;AAAA,kCACI,QAAC,oBAAD;AACI,YAAA,MAAM,EAAErC,MADZ;AAEI,YAAA,YAAY,EAAEjC,UAFlB;AAGI,YAAA,aAAa,EAAEoD,iBAHnB;AAII,YAAA,YAAY,EAAEF,gBAJlB;AAKI,YAAA,aAAa,EAAEC;AALnB;AAAA;AAAA;AAAA;AAAA,kBADJ,eAQI,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,kBARJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAPJ;AAAA;AAAA;AAAA;AAAA,cAlBJ,eAqCI,QAAC,WAAD;AACI,QAAA,KAAK,EAAEa,UADX;AAEI,QAAA,mBAAmB,EAAET,mBAFzB;AAGI,QAAA,sBAAsB,EAAEC;AAH5B;AAAA;AAAA;AAAA;AAAA,cArCJ,EAyCKG,SAAS,GAAG,CAAZ,iBACG,QAAC,QAAD;AAAU,QAAA,KAAK,EAAE;AAACY,UAAAA,MAAM,EAAE,KAAKZ;AAAd,SAAjB;AAAA,+BACI,QAAC,SAAD;AAAW,UAAA,OAAO,EAAE;AAApB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cA1CR,eA8CI,QAAC,eAAD;AACI,QAAA,kBAAkB,EAAE,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CADxB;AAEI,QAAA,SAAS,EAAC,KAFd;AAGI,QAAA,KAAK,EAAEpD,IAAI,CAACuD,MAHhB;AAII,QAAA,WAAW,EAAE3C,WAJjB;AAKI,QAAA,IAAI,EAAEE,IALV;AAMI,QAAA,YAAY,EAAEsB,gBANlB;AAOI,QAAA,mBAAmB,EAAEG;AAPzB;AAAA;AAAA;AAAA;AAAA,cA9CJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AA4DH;;GAzKuB/C,a;UAIH/B,W,EAYLC,W,EAkBGf,S;;;KAlCK6C,a","sourcesContent":["import {useFormik} from 'formik';\r\nimport {useEffect, useState} from 'react';\r\n// material\r\nimport {Button, Container, Stack, TableCell, TablePagination, TableRow, Typography} from '@mui/material';\r\n// components\r\nimport Page from '../components/Page';\r\nimport {\r\n    ProductSort,\r\n    ProductList,\r\n    ProductFilterSidebar\r\n} from '../components/_dashboard/products';\r\n//\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {getProduct, getProductById} from '../store/slice/products';\r\nimport {unwrapResult} from '@reduxjs/toolkit';\r\nimport {Link as RouterLink} from 'react-router-dom';\r\nimport {Icon} from '@iconify/react';\r\nimport plusFill from '@iconify/icons-eva/plus-fill';\r\nimport CreateForm from '../components/products/CreateForm';\r\nimport CreateFormImage from '../components/products/CreateFormImage';\r\nimport {filter} from 'lodash';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n    if (b[orderBy] < a[orderBy]) {\r\n        return -1;\r\n    }\r\n    if (b[orderBy] > a[orderBy]) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n    return order === 'desc'\r\n        ? (a, b) => descendingComparator(a, b, orderBy)\r\n        : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction applySortFilter(array, comparator, query) {\r\n    const stabilizedThis = array.map((el, index) => [el, index]);\r\n    stabilizedThis.sort((a, b) => {\r\n        const order = comparator(a[0], b[0]);\r\n        if (order !== 0) {\r\n            return order;\r\n        }\r\n        return a[1] - b[1];\r\n    });\r\n    if (query) {\r\n        return filter(array, (_user) => _user.name.toLowerCase().indexOf(query.toLowerCase()) !== -1);\r\n    }\r\n    return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\n\r\nexport default function EcommerceShop() {\r\n    const [openFilter, setOpenFilter] = useState(false);\r\n    const [openForm, setOpenForm] = useState(false);\r\n    const [openImageForm, setOpenImageForm] = useState(false);\r\n    const dispatch = useDispatch();\r\n    const [data, setData] = useState([]);\r\n    const [dataEdit, setDataEdit] = useState([]);\r\n    const [productEdit, setProductEdit] = useState(null);\r\n    const [isEdit, setIsEdit] = useState(false);\r\n    const [isDelete, setIsDelete] = useState(false);\r\n    const [submitImage, setSubmitImage] = useState(false);\r\n    const [rowsPerPage, setRowsPerPage] = useState(8);\r\n    const [page, setPage] = useState(0);\r\n    const [order] = useState('asc');\r\n    const [orderBy] = useState('name');\r\n    const [filterName] = useState('');\r\n    const store=useSelector(state=>state.products);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [submitImage, isEdit, isDelete]);\r\n\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const res = await dispatch(getProduct());\r\n            setData(res.payload);\r\n\r\n            unwrapResult(res);\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            gender: '',\r\n            category: '',\r\n            colors: '',\r\n            priceRange: '',\r\n            rating: ''\r\n        },\r\n        onSubmit: () => {\r\n            setOpenFilter(false);\r\n        }\r\n    });\r\n\r\n    const {resetForm, handleSubmit} = formik;\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n        setPage(newPage);\r\n    };\r\n\r\n    const handleChangeRowsPerPage = (event) => {\r\n        console.log(parseInt(event.target.value, 10));\r\n        setRowsPerPage(parseInt(event.target.value, 10));\r\n        setPage(0);\r\n    };\r\n\r\n\r\n    const handleOpenFilter = () => {\r\n        setOpenFilter(true);\r\n    };\r\n\r\n    const handleCloseFilter = () => {\r\n        setOpenFilter(false);\r\n    };\r\n\r\n    const handleResetFilter = () => {\r\n        handleSubmit();\r\n        resetForm();\r\n    };\r\n\r\n\r\n    const handleFormSubmit = async (value) => {\r\n        setOpenForm(false);\r\n        setDataEdit({});\r\n        value && setIsEdit(value);\r\n        setOpenImageForm(true);\r\n    };\r\n\r\n    const handleSubmitImage = (value) => {\r\n        setSubmitImage(value);\r\n        setOpenImageForm(false);\r\n    };\r\n\r\n    const handleDeleteProduct=(value)=>{\r\n        value&&setIsDelete(value);\r\n    };\r\n\r\n    const handleClickProductName = async (id) => {\r\n        try {\r\n            const res = await dispatch(getProductById(id));\r\n            setDataEdit(res.payload);\r\n            setProductEdit(res.payload.product.id);\r\n            setOpenForm(true);\r\n            setOpenImageForm(true);\r\n            unwrapResult(res);\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    const emptyRows = page > 0 ? Math.max(0, (1 + page) * rowsPerPage - data.length) : 0;\r\n    const filteredProducts = applySortFilter(data, getComparator(order, orderBy), filterName);\r\n\r\n    const dataOfPage = filteredProducts.filter(item => item.product.name !== undefined)\r\n        .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage);\r\n\r\n    return (\r\n        <Page title=\"Dashboard: Products | Minimal-UI\">\r\n            <Container>\r\n                <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" mb={5}>\r\n                    <Typography variant=\"h4\" sx={{mb: 5}}>\r\n                        Products\r\n                    </Typography>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        component={RouterLink}\r\n                        to=\"#\"\r\n                        startIcon={<Icon icon={plusFill}/>}\r\n                        onClick={() => setOpenForm(!openForm)}\r\n                    >\r\n                        New Product\r\n                    </Button>\r\n                </Stack>\r\n\r\n                {openForm && <CreateForm handleFormSubmit={handleFormSubmit} dataEdit={dataEdit}/>}\r\n                {openImageForm && <CreateFormImage submitImage={handleSubmitImage} id={store.postData.id} productEdit={productEdit}/>}\r\n                <Stack\r\n                    direction=\"row\"\r\n                    flexWrap=\"wrap-reverse\"\r\n                    alignItems=\"center\"\r\n                    justifyContent=\"flex-end\"\r\n                    sx={{mb: 5}}\r\n                >\r\n                    <Stack direction=\"row\" spacing={1} flexShrink={0} sx={{my: 1}}>\r\n                        <ProductFilterSidebar\r\n                            formik={formik}\r\n                            isOpenFilter={openFilter}\r\n                            onResetFilter={handleResetFilter}\r\n                            onOpenFilter={handleOpenFilter}\r\n                            onCloseFilter={handleCloseFilter}\r\n                        />\r\n                        <ProductSort/>\r\n                    </Stack>\r\n                </Stack>\r\n\r\n                <ProductList\r\n                    items={dataOfPage}\r\n                    handleDeleteProduct={handleDeleteProduct}\r\n                    handleClickProductName={handleClickProductName}/>\r\n                {emptyRows > 0 && (\r\n                    <TableRow style={{height: 53 * emptyRows}}>\r\n                        <TableCell colSpan={6}/>\r\n                    </TableRow>\r\n                )}\r\n                <TablePagination\r\n                    rowsPerPageOptions={[8, 16, 24]}\r\n                    component=\"div\"\r\n                    count={data.length}\r\n                    rowsPerPage={rowsPerPage}\r\n                    page={page}\r\n                    onPageChange={handleChangePage}\r\n                    onRowsPerPageChange={handleChangeRowsPerPage}\r\n                />\r\n            </Container>\r\n        </Page>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}